// --- Homy To-Do List Mini Web Application ---\n// This program demonstrates the core features of the Homy language\n// by creating a simple interactive To-Do list web application.\n\n// --- Application Metadata ---\n// Define the name of our mini application.\nname_app_mini("HomyToDoApp")\n// Specify the package name, similar to domain names in reverse.\nweb_package_mini("com.homy.todoapp")\n// Set the version of the web application bundle.\nweb_mini_version("1.0.0")\n// Set the internal application version.\nmini_version("1.0")\n// Provide a path to the application's icon asset.\nmini_app_icon("assets/todo_icon.png")\n\n// --- Main Application Body and Logic ---\n// The 'body@' block encapsulates the Homy code that defines the\n// web application's structure, style, and interactive logic.\nbody@\n(style:\n    /* General container for the entire application */\n    .app-container {\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        max-width: 600px;\n        margin: 40px auto;\n        padding: 30px;\n        border: 1px solid #e0e0e0;\n        border-radius: 12px;\n        box-shadow: 0 4px 15px rgba(0,0,0,0.08);\n        background-color: #ffffff;\n    }\n    /* Title styling */\n    .app-title {\n        color: #333;\n        text-align: center;\n        margin-bottom: 25px;\n        font-size: 2em;\n        font-weight: 600;\n    }\n    /* Input field for new tasks */\n    .input-field {\n        width: 70%;\n        padding: 12px;\n        margin-right: 10px;\n        border: 1px solid #ccc;\n        border-radius: 6px;\n        font-size: 1em;\n    }\n    /* Button to add tasks */\n    .add-button {\n        padding: 12px 20px;\n        background-color: #007bff;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 1em;\n        transition: background-color 0.2s ease;\n    }\n    .add-button:hover {\n        background-color: #0056b3;\n    }\n    /* List container for tasks */\n    .task-list {\n        list-style: none;\n        padding: 0;\n        margin-top: 25px;\n    }\n    /* Individual task item styling */\n    .task-item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 12px 0;\n        border-bottom: 1px dashed #eee;\n        transition: background-color 0.1s ease;\n    }\n    .task-item:last-child {\n        border-bottom: none;\n    }\n    .task-item:hover {\n        background-color: #f9f9f9;\n    }\n    /* Task text styling */\n    .task-text {\n        flex-grow: 1;\n        cursor: pointer;\n        font-size: 1.1em;\n        color: #555;\n    }\n    /* Styling for completed tasks */\n    .completed-task .task-text {\n        text-decoration: line-through;\n        color: #a0a0a0;\n    }\n    /* Delete button styling */\n    .delete-button {\n        background-color: #dc3545;\n        color: white;\n        border: none;\n        padding: 8px 14px;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 0.9em;\n        transition: background-color 0.2s ease;\n    }\n    .delete-button:hover {\n        background-color: #c82333;\n    }\n    /* Message for empty task list */\n    .empty-message {\n        text-align: center;\n        color: #888;\n        padding: 20px;\n        font-style: italic;\n    }\n)\n\n// --- Global Variables for the To-Do Application ---\n// Declare a list (array) to store our To-Do task objects.\n// Each task will have an 'id', 'text', and 'completed' status.\nvar tasks: List<Object> = []\n\n// Declare a counter for task IDs to ensure each task has a unique identifier.\nvar nextTaskId: Number = 0\n\n// --- Function to add a new task to the list ---\n// Parameters: taskText (String) - the description for the new task.\n// Returns: Boolean - true if the task was added successfully, false otherwise.\nfunc addTask(taskText: String) -> Boolean {\n    // Ensure the task text is not empty or just whitespace.\n    if taskText.trim().length() > 0 {\n        // Create a new task object with a unique ID, text, and initial 'completed' status.\n        var newTask: Object = {\n            id: nextTaskId,\n            text: taskText.trim(),\n            completed: false\n        }\n        // Add the newly created task to the global 'tasks' list.\n        tasks.append(newTask)\n        // Increment the task ID counter for the next task.\n        nextTaskId = nextTaskId + 1\n        // Re-render the task list in the UI to display the new task.\n        renderTasks()\n        // Log the successful addition.\n        console.log("Task added: " + taskText)\n        return true // Indicate success.\n    } else {\n        // Log an error if an attempt was made to add an empty task.\n        console.log("Error: Cannot add an empty task!")\n        return false // Indicate failure.\n    }\n}\n\n// --- Function to toggle a task's completion status ---\n// Parameters: taskId (Number) - the unique ID of the task to be toggled.\n// Returns: Boolean - true if the task was found and toggled, false if not found.\nfunc toggleTaskCompletion(taskId: Number) -> Boolean {\n    // Iterate through all tasks to find the one matching the given ID.\n    for task in tasks {\n        if task.id == taskId {\n            // Toggle the 'completed' status of the found task.\n            task.completed = !task.completed\n            // Re-render the task list to update its visual representation.\n            renderTasks()\n            console.log("Task " + taskId + " completion toggled to " + task.completed)\n            return true // Task found and toggled successfully.\n        }\n    }\n    // If the loop finishes, the task was not found.\n    console.log("Error: Task with ID " + taskId + " not found for toggling completion.")\n    return false // Indicate failure.\n}\n\n// --- Function to delete a task from the list ---\n// Parameters: taskId (Number) - the unique ID of the task to be deleted.\n// Returns: Boolean - true if the task was deleted, false if not found.\nfunc deleteTask(taskId: Number) -> Boolean {\n    // Store the initial count of tasks to check if a deletion occurred.\n    var initialTaskCount: Number = tasks.length()\n    \n    // Filter the 'tasks' list, keeping only tasks whose ID does NOT match the taskId to be deleted.\n    tasks = tasks.filter(func(task: Object) -> Boolean {\n        return task.id != taskId\n    })\n\n    // Check if the number of tasks has decreased, indicating a successful deletion.\n    if tasks.length() < initialTaskCount {\n        // Re-render the task list to reflect the deletion.\n        renderTasks()\n        console.log("Task " + taskId + " deleted.")\n        return true // Indicate success.\n    } else {\n        // Log an error if the task with the given ID was not found.\n        console.log("Error: Task with ID " + taskId + " not found for deletion.")\n        return false // Indicate failure.\n    }\n}\n\n// --- Function to render (display) all tasks in the web application's UI ---\n// This function dynamically generates the HTML content for the task list.\nfunc renderTasks() {\n    // Clear any existing content within the HTML element with id 'taskList'.\n    // This ensures a fresh render of the current task state.\n    html.clear("#taskList")\n\n    // Check if there are any tasks in the list.\n    if tasks.length() == 0 {\n        // If no tasks, display a message indicating an empty list.\n        html.append("#taskList", "<p class='empty-message'>No tasks yet! Add one above to get started.</p>")\n    } else {\n        // Loop through each task object in the 'tasks' list.\n        for task in tasks {\n            // Determine the CSS class based on the task's completion status.\n            var taskClass: String = ""\n            if task.completed == true {\n                taskClass = "completed-task"\n            }\n\n            // Construct the HTML string for a single task item.\n            // This includes the task text, and buttons for toggling completion and deletion.\n            // 'onclick' attributes directly call Homy functions from the generated HTML.\n            var taskHtml: String = "<li class='task-item " + taskClass + "' data-task-id='" + task.id + "'>" +\n                                    "<span class='task-text' onclick='toggleTaskCompletion(" + task.id + ")'>" + task.text + "</span>" +\n                                    "<button class='delete-button' onclick='deleteTask(" + task.id + ")'>Delete</button>" +\n                                    "</li>"\n            // Append the generated task HTML to the 'taskList' element in the DOM.\n            html.append("#taskList", taskHtml)\n        }\n    }\n    console.log("Tasks rendered. Current task count: " + tasks.length())\n}\n\n// --- Function to initialize the Homy To-Do Application ---\n// This function sets up the initial state and event listeners for the application.\nfunc initializeApp() {\n    console.log("Homy To-Do App Initializing...")\n\n    // Add some initial tasks to demonstrate functionality when the app starts.\n    // These tasks are added using the 'addTask' function, which also triggers rendering.\n    addTask("Learn Homy Language Syntax")\n    addTask("Build a mini web app with Homy")\n    addTask("Deploy Homy app to production")\n\n    // Attach an event listener to the 'add task' button.\n    // When the button with id 'addTaskBtn' is clicked, the provided anonymous function executes.\n    event.onClick("#addTaskBtn", func() {\n        // Get a reference to the input element where new task text is entered.\n        var inputElement = html.getElement("#newTaskInput")\n        // Retrieve the current value (text) from the input field.\n        var taskText = inputElement.value\n        // Attempt to add the task. If successful, clear the input field.\n        if addTask(taskText) {\n            inputElement.value = "" // Clear the input field for the next task.\n        }\n    })\n    \n    // Ensure tasks are rendered initially, even if no initial tasks were added.\n    renderTasks()\n\n    console.log("Homy To-Do App Ready!")\n}\n\n// --- Application Entry Point ---\n// Call the initialization function when the application fully loads.\n// This is akin to a document.ready or window.onload event in traditional web development.\ninitializeApp()\n\n// --- HTML Document Association ---\n// This directive indicates that the Homy code in this 'body@' block\n// is intended to interact with and control the 'index.html' file.\nCall: index.html\n/body
